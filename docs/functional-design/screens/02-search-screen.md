# 画面詳細設計：求人検索画面 (Search Screen)

## 1. 概要
- **目的**: AI（Gemini）を活用した高度な自然文検索により、ユーザーの意図に合致する求人をWeb全体から検索・評価して表示する。
- **パス**: `/search`

## 2. 構成要素 (UI Components)

### 検索フォーム (AI Search Form)
- **自然文入力エリア (Smart Textarea)**:
  - プレースホルダー: "東京でReactの求人を探しています。年収は800万以上で、スタートアップが希望です。"
  - 機能: ユーザーの曖昧な要望を受け付けるメイン入力。
- **詳細フィルター (Optional Filters)**: 
  - ※AIが自動抽出するため必須ではないが、明示的な絞り込み用として提供。
  - 勤務地、最低年収、除外キーワード

### 検索結果一覧 (AI Results Grid)
- **AI インサイト (Search Insight - Top)**:
  - **意図解釈**: AIがどう解釈したかを表示（例: "🔍 東京 × IT/Web × 年収800万~ の条件で検索しました"）
  - **信頼度バッジ**: 検索結果全体の信頼性を示唆。

- **求人カード (AI Enhanced Job Card)**:
  - **基本情報**: タイトル、企業名、勤務地、年収レンジ。
  - **マッチ度スコア**: 0-100のスコアを表示。
  - **信頼度 (Confidence)**: AIによる検証結果（Self-Consistency）を表示（例: "3回中3回一致 for User Needs"）。
  - **✨ マッチ理由 (Why this matches?)**:
    - AIが生成した「あなたにおすすめする理由」を3点箇条書きで表示。
    - 例: "✅ Reactの実務経験要件が合致します", "✅ 希望するスタートアップ環境です"
  - **🏢 企業評価サマリー**:
    - 技術力スコア（Gemini）と文化スコア（Claude）のレーダーチャートや短い要約を表示。
  
- **詳細を見るボタン**: クリックで求人詳細モーダルまたはページへ遷移。
- **お気に入りボタン**: 気になる求人を保存。

## 3. 機能・ロジック (Logic)

### 検索プロセス (The AI Flow)
1. **Submit**: ユーザーが検索ボタンを押下。
2. **API Call**: `GET /api/jobs?q=...` をコール。
3. **Loading**: 
   - AI処理（Stage 1〜4）に時間がかかる（数秒〜十数秒）ため、プログレスバーや「AIが分析中...」といったリッチなローディングを表示する。
   - ステップ表示（Creating Query → Searching → Validating → Evaluating...）で体感待ち時間を減らす。
4. **Render**: 結果（JSON）を受け取り、カード一覧を描画。

### エラーハンドリング
- **検索結果 0件**: 
  - 「条件が厳しすぎる可能性があります」等のAIアドバイスを表示。
- **タイムアウト**:
  - API制限（7回）内でも時間がかかる場合があるため、適切なタイムアウト通知を行う。

## 4. データ要件 (Data Requirements)
- **Source**: Real-time AI Search Result (Not Database)
- **Schema**:
  - `id`: UUID (Temporary generated by backend)
  - `title`: string
  - `company`: { name, evaluation_summary, scores }
  - `match_reasons`: string[] (AI Generated)
  - `confidence`: number (0-100)
  - `source_url`: string (Link to Indeed/Green/etc.)

## 5. 遷移
- **詳細を見る**: 求人詳細画面へ（メタデータ引継ぎ）

